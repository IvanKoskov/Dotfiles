"use strict";var M=Object.create;var l=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v=(t,e)=>{for(var r in e)l(t,r,{get:e[r],enumerable:!0})},g=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of U(e))!E.call(t,s)&&s!==r&&l(t,s,{get:()=>e[s],enumerable:!(n=N(e,s))||n.enumerable});return t};var y=(t,e,r)=>(r=t!=null?M(b(t)):{},g(e||!t||!t.__esModule?l(r,"default",{value:t,enumerable:!0}):r,t)),L=t=>g(l({},"__esModule",{value:!0}),t);var D=R((z,k)=>{"use strict";var $=require("os"),j=$.homedir();k.exports=t=>{if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);return j?t.replace(/^~(?=$|\/|\\)/,j):t}});var O={};v(O,{default:()=>B});module.exports=L(O);var x=require("child_process"),w=require("util"),h=(0,w.promisify)(x.exec);var X=y(D()),S=y(require("path"));var C=require("@raycast/api"),A=(0,C.getPreferenceValues)();var I=A;var f=class t{static async xcodeProjects(){let r=await h(`mdfind -attr kMDItemLastUsedDate '${["kMDItemDisplayName == *.xcodeproj","kMDItemDisplayName == *.xcworkspace","kMDItemDisplayName == Package.swift","kMDItemDisplayName == *.playground"].join(" || ")}'`),n=t.excludedXcodeProjectPaths(),s=/^(.*?)\s+kMDItemLastUsedDate\s+=\s+(.*)$/,c=[];for(let o of r.stdout.trim().split(`
`)){let a=o.trim();if(!a)continue;let i,p,m=a.match(s);if(m&&m.length>2){i=m[1].trim();let d=m[2].trim();if(d!=="(null)"){let P=new Date(d);p=isNaN(P.getTime())?void 0:P}}else i=a;if(i.includes("/Carthage/Checkouts")||i.includes("/Pods/")||i.includes("/Library/Autosave Information")||n.some(d=>i.startsWith(d)))continue;let u=t.decodeXcodeProject(i,p);u&&c.push(u)}return c.sort((o,a)=>(a.lastUsed?.getTime()??0)-(o.lastUsed?.getTime()??0)),c}static excludedXcodeProjectPaths(){let e=I.excludedXcodeProjectPaths;return e?e.split(",").map(r=>r.trim()).map(r=>(0,X.default)(r)):[]}static decodeXcodeProject(e,r){let n=e.substring(e.lastIndexOf("/")+1),s=n.split(".").at(-1),c;switch(s){case"xcodeproj":case"xcworkspace":case"playground":{let a=n.split(".");a.pop(),c=a.join(".");break}case"swift":c=e.split("/").at(-2)??n;break;default:return}let o=e.split("/");return o.pop(),o.push(c),o=[...new Set(o.filter(Boolean))],{name:c,type:s,directoryPath:S.dirname(e),filePath:e,lastUsed:r,keywords:o.reverse()}}};var B=async t=>{let e=await f.xcodeProjects();return t.filter&&(e=e.filter(r=>r.type===t.filter)),t.limit&&t.limit>0&&(e=e.slice(0,t.limit)),e};
